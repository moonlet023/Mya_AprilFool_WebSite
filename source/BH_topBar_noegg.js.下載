var topBarType="",topBarClass="";function NOTIFY_follow(e,r,d){var i=new Date,s=(1+d)%2;jQuery.ajax({url:"https://api.gamer.com.tw/ajax/common/home_follow_set.php",data:{at:e,fid:r,at_v:s,time:i.getTime()},method:"POST",xhrFields:{withCredentials:!0}}).done(function(n){var u=n.getElementsByTagName("errMsg");if(u.length)alert(u[0].firstChild.nodeValue);else if(n.getElementsByTagName("fin")[0].firstChild.nodeValue==="success"){e==1&&(f_title="\u54C8\u5566\u5340\u767C\u8868"),e==2&&(f_title="\u5275\u4F5C"),e==3&&(f_title="\u63A8\u85A6"),e==5&&(f_title="\u5BE6\u6CC1"),e==4?f_alt=s==1?"\u505C\u6B62\u6B64\u4F5C\u54C1\u6240\u6709\u8A0A\u606F":"\u6062\u5FA9\u6B64\u4F5C\u54C1\u6240\u6709\u8A0A\u606F":f_alt=s==1?"\u53D6\u6D88\u8A02\u95B1\u4ED6\u7684"+f_title:"\u8A02\u95B1\u4ED6\u7684"+f_title;var p=jQuery('[name="follow_'+e+"_"+r+'"]'),o=jQuery('[name="follow2_'+e+"_"+r+'"]'),a=jQuery('.list-item-box [name="follow_'+e+"_"+r+'"]'),h=jQuery('.list-item-box [name="follow2_'+e+"_"+r+'"]'),l;s==1?(l="on",p.parent("div").removeClass("is-disabled"),o.parent("div").removeClass("is-disabled")):(l="off",p.parent("div").addClass("is-disabled"),o.parent("div").addClass("is-disabled")),p.attr("href","javascript:NOTIFY_follow('"+e+"', '"+r+"', "+s+")").html('<img src="https://i2.bahamut.com.tw/rss-'+l+'.svg" title="'+f_alt+'" />'),o.attr("href","javascript:NOTIFY_follow('"+e+"', '"+r+"', "+s+")").html('<img src="https://i2.bahamut.com.tw/rss-'+l+'.svg" style="width:16px;" title="'+f_alt+'" />'),(a.length!=0||h.length!=0)&&(a.html('<img src="https://i2.bahamut.com.tw/rss-'+l+'.svg" style="width:16px;" title="'+f_alt+'"/>'+f_alt),h.html('<img src="https://i2.bahamut.com.tw/rss-'+l+'.svg" style="width:16px;" title="'+f_alt+'"/>'+f_alt))}})}(function(e,r,d){"use strict";var i={onoff:function(s,n,u,p){if(p=p||"",p){if(e(u).attr("data-switch")!=1)return Dialogify.alert("\u5DF2\u79FB\u9664\u6A19\u8A18!"),!1;var o="https://api.gamer.com.tw/ajax/common/notify_remove_tag.php"}else var o="https://api.gamer.com.tw/ajax/common/notify_onoff.php";e.ajax({url:o,method:"get",data:{type:s,id:n,onoff:e(u).attr("data-switch")},cache:!1,xhrFields:{withCredentials:!0}}).done(function(a){if(typeof a.error<"u")return"";var h=e(u).attr("data-switch")==1?0:1,l=e("[name=icon_"+s+"_"+n+"]"),c=e("[name=icon2_"+s+"_"+n+"]"),t=e('.list-item-box [name="icon_'+s+"_"+n+'"]'),f=e('.list-item-box [name="icon2_'+s+"_"+n+'"]'),g;if(h==1?(g="on",l.parent("div").removeClass("is-disabled"),c.parent("div").removeClass("is-disabled")):(g="off",l.parent("div").addClass("is-disabled"),c.parent("div").addClass("is-disabled")),p){var m=h==1?"\u79FB\u9664\u6A19\u8A18":"\u5DF2\u79FB\u9664\u6A19\u8A18";l.attr("data-switch",h).html('<img src="https://i2.bahamut.com.tw/wall-tag-'+g+'.png" title="'+m+'">'),c.attr("data-switch",h).html('<img src="https://i2.bahamut.com.tw/wall-tag-'+g+'.png" style="width:16px; height:16px;" title="'+m+'">'),(t.length!=0||f.length!=0)&&(t.html('<img src="https://i2.bahamut.com.tw/wall-tag-'+g+'.png" style="width:16px; height:16px;" title="'+m+'"/>'+m),f.html('<img src="https://i2.bahamut.com.tw/wall-tag-'+g+'.png" style="width:16px; height:16px;" title="'+m+'"/>'+m))}else{var m=h==1?"\u505C\u6B62\u9019\u5247\u901A\u77E5":"\u958B\u555F\u9019\u5247\u901A\u77E5";l.attr("data-switch",h).html('<img src="https://i2.bahamut.com.tw/sound-'+g+'.svg?_=1" title="'+m+'">'),c.attr("data-switch",h).html('<img src="https://i2.bahamut.com.tw/sound-'+g+'.svg?_=1" style="width:16px;" title="'+m+'">'),(t.length!=0||f.length!=0)&&(t.html('<img src="https://i2.bahamut.com.tw/sound-'+g+'.svg" style="width:16px;" title="'+m+'"/>'+m),f.html('<img src="https://i2.bahamut.com.tw/sound-'+g+'.svg" style="width:16px;" title="'+m+'"/>'+m))}})}};r.bahaNotification=i})(jQuery,window);function topNotify_follow(e,r,d,i,s,n){User.Login.requireLogin()&&(r=r||"checked",d=d||"checked",i=i||"checked",s=s||"checked",n=n||"checked",new Dialogify('<input id="c1" type="checkbox" value="1" '+r+'/>\u53ED\u5566\u53ED\u5566<input style="margin-left:15px" id="c2" type="checkbox" value="2" '+d+'/>\u54C8\u5566\u5340\u767C\u8868<input style="margin-left:15px" id="c3" type="checkbox" value="4" '+i+'/>\u5C0F\u5C4B\u767C\u8868<br><br><input id="c4" type="checkbox" value="16" '+s+'/>\u4ED6\u7684\u63A8\u85A6<input style="margin-left:15px" id="c5" type="checkbox" value="32" '+n+"/>\u5BE6\u6CC1\u983B\u9053").title("\u8FFD\u8E64\u52D5\u614B").buttons([{text:"\u78BA\u5B9A",type:Dialogify.BUTTON_PRIMARY,click:function(u){var p=0;jQuery("#c1").is(":checked")&&(p=p|jQuery("#c1").val()),jQuery("#c2").is(":checked")&&(p=p|jQuery("#c2").val()),jQuery("#c3").is(":checked")&&(p=p|jQuery("#c3").val()),jQuery("#c4").is(":checked")&&(p=p|jQuery("#c4").val()),jQuery("#c5").is(":checked")&&(p=p|jQuery("#c5").val()),getCSRFToken().done(function(o){jQuery.ajax({url:"https://api.gamer.com.tw/ajax/common/home_follow_add.php",method:"POST",data:{who:e,v:p,token:o},xhrFields:{withCredentials:!0}}).done(function(a){Dialogify.alert(a)})})}}]).showModal())}var BH_AlkasooD=function(e){function r(c){var t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];return t[c]}function d(c){if(c=="-")return-1;var t=c.charCodeAt(0);return t>=48&&t<=57?t-=48:t>=65&&t<=90?t-=55:t>=97&&t<=122?t-=61:t=-1,t}function i(c,t,f){var g=25,m=c||"",_;if(c=="")for(_=0;_<g;_++)m+="-";return m=m.substring(0,t)+r(f)+m.substring(t+1),escape(m)}var s=Cookies.get("ckBahaAd"),n=!1,u=!1,p={};e("a.a-mercy-d").each(function(){var c=e(this).data("mercy");if(c){var t=c.split(":");t[0]&&t[1]&&(t[0]=parseInt(t[0],10),t[1]=parseInt(t[1],10),s=i(s,t[0],t[1]),n=!0)}var f=e(this).data("si");if(f){var t=f.split(":"),g=t[0];if(typeof t[1]<"u"){var m=t[1].split(",");e.each(m,function(y,v){var w=v.split("_");e.extend(!0,p,JSON.parse('{"'+g+'":{"'+w[0]+'":"'+w[1]+'"}}')),u=!0})}}});var o=new Date,a=new Date(o.getFullYear(),o.getMonth(),o.getDate(),23,59,59);if(u){var h=Cookies.get("ckBAHAADS");if(!h)Cookies.set("ckBAHAADS",JSON.stringify(p),{expires:a,path:"/",domain:".gamer.com.tw"});else{var l=JSON.parse(h);e.extend(!0,l,p),Cookies.set("ckBAHAADS",JSON.stringify(l),{expires:a,path:"/",domain:".gamer.com.tw"})}}n&&Cookies.set("ckBahaAd",s,{expires:a,path:"/",domain:".gamer.com.tw"})};(function(e,r){var d=function(i){this._options={resetOnEnd:!1,loopCheckTime:50,loopMaxNumber:2,baitClass:"pub_300x250 pub_300x250m pub_728x90 text-ad textAd text_ad text_ads text-ads text-ad-links",baitStyle:"width: 1px !important; height: 1px !important; position: absolute !important; left: -10000px !important; top: -1000px !important;"},this._var={bait:null,checking:!1,loop:null,loopNumber:0,event:{detected:[],notDetected:[]}},i!==r&&this.setOption(i);var s=this,n=function(){setTimeout(function(){s._var.bait===null&&s._creatBait(),setTimeout(function(){s._check()},1)},1)};e.addEventListener!==r?e.addEventListener("load",n,!1):e.attachEvent("onload",n)};d.prototype._options=null,d.prototype._var=null,d.prototype._bait=null,d.prototype.setOption=function(i){for(var s in i)this._options[s]=i[s];return this},d.prototype._creatBait=function(){var i=document.createElement("div");i.setAttribute("class",this._options.baitClass),i.setAttribute("style",this._options.baitStyle),this._var.bait=e.document.body.appendChild(i),this._var.bait.offsetParent,this._var.bait.offsetHeight,this._var.bait.offsetLeft,this._var.bait.offsetTop,this._var.bait.offsetWidth,this._var.bait.clientHeight,this._var.bait.clientWidth},d.prototype._destroyBait=function(){e.document.body.removeChild(this._var.bait),this._var.bait=null},d.prototype._check=function(i){if(i===r&&(i=!0),this._var.checking===!0)return!1;this._var.checking=!0,this._var.bait===null&&this._creatBait();var s=this;return this._var.loopNumber=0,i===!0&&(this._var.loop=setInterval(function(){s._checkBait(i)},this._options.loopCheckTime)),setTimeout(function(){s._checkBait(i)},1),!0},d.prototype._checkBait=function(i){var s=!1;if(this._var.bait===null&&this._creatBait(),(e.document.body.getAttribute("abp")!==null||this._var.bait.offsetParent===null||this._var.bait.offsetHeight==0||this._var.bait.offsetLeft==0||this._var.bait.offsetTop==0||this._var.bait.offsetWidth==0||this._var.bait.clientHeight==0||this._var.bait.clientWidth==0)&&(s=!0),e.getComputedStyle!==r){var n=e.getComputedStyle(this._var.bait,null);n&&(n.getPropertyValue("display")=="none"||n.getPropertyValue("visibility")=="hidden")&&(s=!0)}i===!0&&(this._var.loopNumber++,this._var.loopNumber>=this._options.loopMaxNumber&&this._stopLoop()),s===!0?(this._stopLoop(),this._destroyBait(),this.emitEvent(!0),i===!0&&(this._var.checking=!1)):(this._var.loop===null||i===!1)&&(this._destroyBait(),this.emitEvent(!1),i===!0&&(this._var.checking=!1))},d.prototype._stopLoop=function(i){clearInterval(this._var.loop),this._var.loop=null,this._var.loopNumber=0},d.prototype.emitEvent=function(i){var s=this._var.event[i===!0?"detected":""];for(var n in s)s.hasOwnProperty(n)&&s[n]();return this._options.resetOnEnd===!0&&this.clearEvent(),this},d.prototype.clearEvent=function(){this._var.event.detected=[],this._var.event.notDetected=[]},d.prototype.on=function(i,s){return this._var.event[i===!0?"detected":"notDetected"].push(s),this},d.prototype.onDetected=function(i){return this.on(!0,i)},d.prototype.onNotDetected=function(i){return this.on(!1,i)},e.AntiAdB=d,e.antiadb===r&&(e.antiadb=new d({resetOnEnd:!0}))})(window),function(e,r,d){"use strict";var i=r.TopBar||{},s=Cookies.get("BAHAID");if(s&&(s=s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")),i.render=function(o){var a="",h=e(".TOP-my");if(s){if(typeof jQuery().slick!="function"){let t=document.createElement("script");t.type="text/javascript",t.src="https://i2.bahamut.com.tw/js/plugins/slick-1.9.0.min.js",document.getElementsByTagName("head")[0].append(t);let f=document.createElement("link");f.type="text/css",f.rel="stylesheet",f.href="https://i2.bahamut.com.tw/css/plugins/slick.css",document.getElementsByTagName("head")[0].append(f)}var l=User.Login.getAvatarUrl();a+="<ul>",a+='<li class="mobilehide"><a id="topBar_mailbox" href="https://mailbox.gamer.com.tw/"><span class="text-tooltip">\u7AD9\u5167\u4FE1</span><img src="https://i2.bahamut.com.tw/top_icon3.png"></a></li>',a+=`<li class="mobilehide"><a id="topBar_forum" href="javascript:TopBar.showMenu('forum', '')"><span class="text-tooltip">\u6211\u7684\u770B\u677F\u53CA\u516C\u6703</span><img src="https://i2.bahamut.com.tw/top_icon4.png"></a></li>`,a+='<li><a class="topbar_member-home" href="https://home.gamer.com.tw/homeindex.php" data-gtm="\u52C7\u8005\u982D\u50CF"><span class="text-tooltip">\u6211\u7684\u5C0F\u5C4B</span><div class="nav-member_imgbox"><img src="'+l+`" /></div></a><a id="topBar_member" class="topbar_member mobilehide" href="javascript:TopBar.showMenu('member', 'topbar_member')"><i class="fa fa-angle-down"></i><span class="text-tooltip">\u52C7\u8005\u6377\u5F91</span></a></li>`,a+=`<li><a id="topBar_more" style="font-size:11px;" href="javascript:TopBar.showMenu('more', '')"><img src="https://i2.bahamut.com.tw/menu.gif"></a></li>`,a+="</ul>",a+="</div>",h.html(a),a="",a+='<p class="TOP-btn">',a+=`<a href="javascript:TopBar.showMenu('light_0', 'topb1', ' topbnow1 topbnow')" id="topBar_light_0" class="topb1" data-tooltiptext="\u901A\u77E5"><span class="text-tooltip">\u901A\u77E5</span></a>`,a+=`<a href="javascript:TopBar.showMenu('light_1', 'topb2 mobilehide', ' topbnow2 topbnow')" id="topBar_light_1" class="topb2 mobilehide" data-tooltiptext="\u8A02\u95B1"><span class="text-tooltip">\u8A02\u95B1</span></a>`,a+=`<a href="javascript:TopBar.showMenu('light_2', 'topb3 mobilehide', ' topbnow3 topbnow')" id="topBar_light_2" class="topb3 mobilehide" data-tooltiptext="\u63A8\u85A6"><span class="text-tooltip">\u63A8\u85A6</span></a>`,a+=`<a href="javascript:TopBar.showMenu('hahamut', 'topb4')" id="topBar_hahamut" class="topb4" style="display:none" data-tooltiptext="\u804A\u5929"><span class="text-tooltip">\u804A\u5929</span></a>`,a+="</p>",a+='<div id="topBar_search" class="mobileshow nav-search">',a+='<div class="nav-search-button topb5" style="display: block;" onclick="TopBar.showSearchBar();">',a+='<i class="nav-search-icon"></i>',a+="</div>",a+="</div>",a+='<div id="topBarMsg_forum" style="display:none" class="TOP-msg"></div>',a+='<div id="topBarMsg_guild" style="display:none" class="TOP-msg"></div>',a+='<div id="topBarMsg_light_0" style="display:none" class="TOP-msg"></div>',a+='<div id="topBarMsg_light_1" style="display:none" class="TOP-msg"></div>',a+='<div id="topBarMsg_light_2" style="display:none" class="TOP-msg"></div>',a+='<div id="topBarMsg_member" style="display:none" class="TOP-msg"></div>',a+='<div id="topBarMsg_hahamut" style="display:none" class="TOP-msg"></div>',e(a).insertAfter(h)}else h.addClass("TOP-nologin"),a+='<a href="https://user.gamer.com.tw/login.php"><img src="https://i2.bahamut.com.tw/none.gif"></a>',a+="<ul>",a+='<li><a href="https://user.gamer.com.tw/login.php">\u6211\u8981\u767B\u5165</a></li>',a+='<li><a href="https://user.gamer.com.tw/regS1.php?click_name=\u5168\u7AD9\u5929\u8A3B\u518A&service_name='+r.location.host.split(".")[0]+'">\u8A3B\u518A</a></li>',a+=`<li><a id="topBar_more" style="font-size:11px;" href="javascript:TopBar.showMenu('more', '')"><img src="https://i2.bahamut.com.tw/menu.gif"></a></li>`,a+="</ul>",a+="</div>",h.html(a),a="",a+='<div id="topBar_search" class="mobileshow nav-search">',a+='<div class="nav-search-button topb5" style="display: block;" onclick="TopBar.showSearchBar();">',a+='<i class="nav-search-icon"></i>',a+="</div>",a+="</div>",e(a).insertAfter(h);var c=e("#BH-menu-path");c.length>0?c.addClass("box-shadow__soft"):e(".TOP-bh").addClass("box-shadow__soft"),e("body").click(function(t){e(t.target).parents(".TOP-btn,.TOP-my,.TOP-msg").length||i.closeMenu()})},i.getNotifyNumber=function(){this.getNotificationNumber()},i.showSearchBar=function(){e("#js-SearchForm").fadeIn("normal"),e(".nav-search-button").fadeOut("normal")},i.hideSearchBar=function(){e("#js-SearchForm").fadeOut("normal"),e(".nav-search-button").fadeIn("normal")},i.showMenu=function(o,a,h=" topbnow"){let l=e("#topBar_"+o),c=e("#topBarMsg_"+o);if(c.css("display")=="none")if(this.closeMenu(),l.addClass(a+h+" is-open"),c.css("display","block"),c.html()==""||l.html().substr(0,6)=="<span>"||o=="hahamut")if(o=="more"){let t="";t+='<!--[if (IE 7)|(IE 8)]><style type="text/css">.TOP-msglist{ max-height:450px;}</style><![endif]-->',t+='<div class="TOP-msglist TOP-more" id="topBarMsgList_more"><!--\u5217\u8868\u958B\u59CB-->',s&&(t+='<div class="mobileshow mobile-top_other">',t+="<p>\u52C7\u8005\u6377\u5F91</p>",t+="<ul>",t+='<li><a href="https://home.gamer.com.tw/notifylist.php?owner='+s+'&t=B"><i class="fa fa-rss-square"></i>\u6211\u7684\u8A02\u95B1</a></li>',t+='<li><a href="https://home.gamer.com.tw/notifylist.php?owner='+s+'&t=C"><i class="fa fa-thumbs-up"></i>\u6211\u7684\u63A8\u85A6</a></li>',t+='<li><a href="https://forum.gamer.com.tw/myBoard.php"><i class="fa fa-tags"></i>\u6211\u7684\u770B\u677F</a></li>',t+='<li><a href="https://home.gamer.com.tw/joinGuild.php"><i class="fa fa-tags"></i>\u6211\u7684\u516C\u6703</a></li>',t+='<li><a href="https://mailbox.gamer.com.tw/"><i class="fa fa-envelope"></i>\u6211\u7684\u4FE1\u7BB1</a></li>',t+='<li><a href="https://home.gamer.com.tw/bookmark.php?owner='+s+'"><i class="fa fa-bookmark"></i>\u6211\u7684\u6536\u85CF</a></li>',t+='<li><a href="https://home.gamer.com.tw/acgbox.php?owner='+s+'"><i class="fa fa-heart"></i>\u6211\u7684\u8FFD\u8E64</a></li>',t+='<li><a href="https://avatar1.gamer.com.tw/wardrobe.php"><i class="fa fa-archive"></i>\u6211\u7684\u8863\u6AC3</a></li>',t+='<li><a href="https://user.gamer.com.tw/editProfile_ssl.php"><i class="fa fa-user"></i>\u6703\u54E1\u8CC7\u6599</a></li>',t+='<li><a href="https://home.gamer.com.tw/homeSecuritySet.php"><i class="fa fa-lock"></i>\u5E33\u865F\u5B89\u5168</a></li>',t+='<li><a href="https://home.gamer.com.tw/setting.php"><i class="fa fa-cog"></i>\u504F\u597D\u8A2D\u5B9A</a></li>',t+="</ul>",t+="</div>"),t+="<div>",t+="<p>\u7AD9\u4E0A\u670D\u52D9</p>",t+="<ul>",t+='<li><a href="//gnn.gamer.com.tw" data-gtm="\u670D\u52D9\u5165\u53E3"><img src="https://i2.bahamut.com.tw/nav-gnn.svg">GNN\u65B0\u805E</a></li>',t+='<li><a href="//forum.gamer.com.tw" data-gtm="\u670D\u52D9\u5165\u53E3"><img src="https://i2.bahamut.com.tw/nav-forum.svg">\u54C8\u5566\u5340</a></li>',t+='<li><a href="//haha.gamer.com.tw" data-gtm="\u670D\u52D9\u5165\u53E3"><img src="https://i2.bahamut.com.tw/nav-ey.svg">\u54C8\u54C8\u59C6\u7279\u4E0DEY</a></li>',t+='<li><a href="//wall.gamer.com.tw" data-gtm="\u670D\u52D9\u5165\u53E3"><img src="https://i2.bahamut.com.tw/nav-wall.svg">\u52D5\u614B\u7246</a></li>',t+='<li><a href="//gnn.gamer.com.tw/gamecrazy.php" data-gtm="\u670D\u52D9\u5165\u53E3"><img src="https://i2.bahamut.com.tw/nav-gamecrazy.svg">\u96FB\u73A9\u760B</a></li>',t+='<li><a href="//ani.gamer.com.tw/" data-gtm="\u670D\u52D9\u5165\u53E3"><img src="https://i2.bahamut.com.tw/nav-ani.svg">\u52D5\u756B\u760B</a></li>',t+='<li><a href="//home.gamer.com.tw" data-gtm="\u670D\u52D9\u5165\u53E3"><img src="https://i2.bahamut.com.tw/nav-creat.svg">\u5275\u4F5C\u5927\u5EF3</a></li>',t+='<li><a href="//home.gamer.com.tw/liveindex.php" data-gtm="\u670D\u52D9\u5165\u53E3"><img src="https://i2.bahamut.com.tw/nav-live.svg">\u5BE6\u6CC1\u5927\u5EF3</a></li>',t+='<li><a href="//guild.gamer.com.tw" data-gtm="\u670D\u52D9\u5165\u53E3"><img src="https://i2.bahamut.com.tw/nav-guild.svg">\u516C\u6703\u5927\u5EF3</a></li>',t+='<li><a href="//avatar1.gamer.com.tw" data-gtm="\u670D\u52D9\u5165\u53E3"><img src="https://i2.bahamut.com.tw/nav-avatar.svg">\u52C7\u8005\u9020\u578B</a></li>',t+='<li><a href="//buy.gamer.com.tw" data-gtm="\u670D\u52D9\u5165\u53E3"><img src="https://i2.bahamut.com.tw/nav-buy.svg">\u5DF4\u54C8\u5546\u57CE</a></li>',t+='<li><a href="//fuli.gamer.com.tw" data-gtm="\u670D\u52D9\u5165\u53E3"><img src="https://i2.bahamut.com.tw/nav-fuli.svg">\u52C7\u8005\u798F\u5229\u793E</a></li>',t+='<li><a href="//prj.gamer.com.tw/app2u/bahaapp.html" data-gtm="\u670D\u52D9\u5165\u53E3"><img src="https://i2.bahamut.com.tw/nav-bh.svg">\uFF21\uFF30\uFF30</a></li>',t+='<li><a href="//prj.gamer.com.tw/acgaward" data-gtm="\u670D\u52D9\u5165\u53E3"><img src="https://i2.bahamut.com.tw/nav-prj.svg">ACG\u5275\u4F5C\u5927\u8CFD</a></li>',t+='<li><a href="//user.gamer.com.tw" data-gtm="\u670D\u52D9\u5165\u53E3"><img src="https://i2.bahamut.com.tw/nav-user.svg">\u6703\u54E1\u4E2D\u5FC3</a></li>',t+='<li><a href="//user.gamer.com.tw/help/tellus.php" data-gtm="\u670D\u52D9\u5165\u53E3"><img src="https://i2.bahamut.com.tw/nav-qa.svg">\u554F\u984C\u56DE\u5831</a></li>',t+="</ul>",t+="</div>",t+='<div class="nav-platform">',t+="<p>\u5E73\u53F0\u5C08\u5340</p>",t+="<ul>",t+='<li class="platform-android"><a href="//acg.gamer.com.tw/android"><i class="fa fa-android" aria-hidden="true"></i>Android</a></li>',t+='<li class="platform-apple"><a href="//acg.gamer.com.tw/ios"><i class="fa fa-apple" aria-hidden="true"></i>iOS</a></li>',t+='<li class="platform-ns"><a href="//acg.gamer.com.tw/switch">Switch</a></li>',t+='<li class="platform-ps"><a href="//acg.gamer.com.tw/ps5">PS5</a></li>',t+='<li class="platform-ps"><a href="//acg.gamer.com.tw/ps4">PS4</a></li>',t+='<li class="platform-olg"><a href="//acg.gamer.com.tw/online">PC \u7DDA\u4E0A</a></li>',t+='<li class="platform-pc"><a href="//acg.gamer.com.tw/pc">PC \u55AE\u6A5F</a></li>',t+='<li class="platform-web"><a href="//acg.gamer.com.tw/web">Web</a></li>',t+='<li class="platform-xbox"><a href="//acg.gamer.com.tw/xboxsx">XboxSX</a></li>',t+='<li class="platform-ac"><a href="//acg.gamer.com.tw/anime">\u52D5\u756B</a></li>',t+='<li class="platform-ac"><a href="//acg.gamer.com.tw/comic">\u6F2B\u756B</a></li>',t+='<li class="platform-ac"><a href="//acg.gamer.com.tw/lightnovel">\u8F15\u5C0F\u8AAA</a></li>',t+="</ul>",t+="</div>",t+="</div><!--\u5217\u8868\u7D50\u675F-->",s&&(t+='<p class="TOP-msgbtn mobileshow"><a href="https://user.gamer.com.tw/logout.php"><i class="fa fa-sign-out" aria-hidden="true"></i>\u767B\u51FA</a></p>'),l.addClass("topbnow_arrow"),c.addClass("TOP-msg").html(t)}else o=="hahamut"?(l.html(`<span class="text-tooltip">${l.data("tooltiptext")}</span>`),c.html('<span>\u54C8\u54C8\u59C6\u7279\u4E0DEY - \u804A\u5929</span><div class="TOP-msglist im_top-sort" id="topBarHahamut"></div><p class="TOP-msgbtn trisection"><a id="im_friend_apply" href="https://haha.gamer.com.tw/?room=friend"><i class="material-icons im_bhtop">group</i>\u597D\u53CB</a><a href="https://haha.gamer.com.tw/?room=chat"><i class="material-icons im_bhtop">fullscreen</i>\u958B\u555F\u5B8C\u6574\u7248</a><a href="https://prj.gamer.com.tw/app2u/bahaapp.html" target="_blank"><i class="material-icons im_bhtop">get_app</i>\u4E0B\u8F09APP</a></p>'),setTimeout(function(){ImTop.showlist(),ImTop.close()},0),l.addClass("topbnow_arrow"),c.css("display","block")):e.ajax({url:"https://api.gamer.com.tw/ajax/common/topBar.php",data:{type:o},method:"GET",xhrFields:{withCredentials:!0}}).done(function(t){let f="";switch(o){case"forum":if(c.css({"max-width":"835px",width:"200px"}),t){let y=(r.innerWidth>0?r.innerWidth:screen.width)<=1024?635:835,v=4,w={415:5,635:7,645:8,835:10};if(!t.match(/<div class="empty-item">/i)){let x=t.match(/<a href="(?:https?:)?\/\/forum\.gamer\.com\.tw\/A\.php/gi).length,b=x<=20?415:Math.ceil(x/10)*215;b=b<y?b:y,c.css("width",`${b}px`),v=w[b]}f=`
                              <link href="https://i2.bahamut.com.tw/css/guild_create_dialogify.css" rel="stylesheet" type="text/css">
                              <script src="https://i2.bahamut.com.tw/js/guild.js"><\/script>
                              <span>\u6211\u7684\u5DF4\u54C8\u793E\u7FA4<div onclick="guildSliderShow(event)" class="nav_toggle" id="guild_slider_toggle"><i class="fa fa-minus-square-o" aria-hidden="true"></i> \u96B1\u85CF\u516C\u6703</div></span>
                              <div class="TOP-msglist TOP-board" id="topBarMsgList_${o}">${t}</div>
                              <p class="TOP-msgbtn">
                                  <a href="https://home.gamer.com.tw/setting/forum_edit_board.php" target="_blank">\u7DE8\u8F2F/\u522A\u9664\u770B\u677F</a><a href="//forum.gamer.com.tw">\u524D\u5F80\u54C8\u5566\u5340</a><a href="//guild.gamer.com.tw">\u524D\u5F80\u516C\u6703\u5927\u5EF3</a>
                              </p>
                              <style>.slick-disabled {display: none !important;}</style>
                              <script>
                                  jQuery(".guild_slider").slick({
                                      dots: false, arrows: true, infinite: false, speed: 300,
                                      slidesToShow: ${v}, slidesToScroll: ${v}
                                  });
                                  function guildSliderShow(event) {
                                    if (event !== undefined) event.stopPropagation();
                                    if (jQuery('#guild_slider').is(":hidden")) {
                                      jQuery('#guild_slider').show();
                                      // set whatever option make slick reflash
                                      jQuery(".guild_slider").slick('slickSetOption', 'speed', 300, true);
                                      jQuery('#guild_slider_toggle').html('<i class="fa fa-minus-square-o" aria-hidden="true"></i> \u96B1\u85CF\u516C\u6703');
                                      Cookies.set('ck_guildSliderHide', 'false', {expires: 365, path: '/', domain:'.gamer.com.tw'});
                                      return;
                                    }
                                    jQuery('#guild_slider').hide();
                                    jQuery('#guild_slider_toggle').html('<i class="fa fa-plus-square-o" aria-hidden="true"></i> \u986F\u793A\u516C\u6703');
                                    Cookies.set('ck_guildSliderHide', 'true', {expires: 365, path: '/', domain:'.gamer.com.tw'});
                                  }
                                  if (Cookies.get('ck_guildSliderHide') === 'true') {
                                    guildSliderShow();
                                  }
                              <\/script>
                              `}break;case"member":f=t;break;case"light_0":case"light_1":case"light_2":l.html(`<span class="text-tooltip">${l.data("tooltiptext")}</span>`);let g="",m="";switch(o){case"light_0":g="\u901A\u77E5",m="A",new p(0).titleNotice().faviconNotice();break;case"light_1":g="\u8A02\u95B1",m="B";break;case"light_2":g="\u63A8\u85A6",m="C";break}f="<span>"+g+'</span><!--[if (IE 7)|(IE 8)]><style type="text/css">.TOP-msglist{ max-height:450px;}</style><![endif]--><div class="TOP-msglist" id="topBarMsgList_'+o+'">'+t+'</div><p class="TOP-msgbtn"><a href="//home.gamer.com.tw/notifylist.php?owner='+Cookies.get("BAHAID")+"&t="+m+'"><i class="fa fa-bars" aria-hidden="true"></i>\u770B\u6240\u6709\u901A\u77E5</a></p>',r.dataLayer&&r.dataLayer.push({event:"all_click","data-gtm-service":"notice","data-gtm-click":"\u9EDE\u64CA\u901A\u77E5","data-gtm-var1":r.location.href,"data-gtm-area":"\u5929\u901A\u77E5"});break}c.html(f),n.port1.postMessage({action:"syncTab",data:{type:o,html:f}}),l.addClass("topbnow_arrow"),c.css("display","block")});else{if(o=="forum"){let t=200,g=(r.innerWidth>0?r.innerWidth:screen.width)<=1024?635:835;if(!c.html().match(/<div class="empty-item">/i)){let m=c.html().match(/<a href="(?:https?:)?\/\/forum\.gamer\.com\.tw\/A\.php/gi).length;t=m<=20?415:Math.ceil(m/10)*215,t=t<g?t:g}c.css({"max-width":"835px",width:`${t}px`}),jQuery(".guild_slider").slick("slickSetOption","speed",300,!0)}l.addClass("topbnow_arrow"),c.css("display","block")}else this.closeMenu()},i.syncTab=function(o){let a=["light_0","light_1","light_2","hahamut"],h=e("#topBar_"+o.type),l=e("#topBarMsg_"+o.type);l.html(o.html),a.includes(o.type)&&h.html(""),o.type=="light_0"&&new p(0).titleNotice().faviconNotice(),l.css("display")==="none"&&h.removeClass(function(c,t){return(t.match(/topbnow[0-3]/g)||[]).join(" ")})},i.closeMenu=function(){e(".TOP-btn a.is-open,.TOP-my a.is-open").removeClass(function(o,a){return(a.match(/(topbnow(_arrow|[0-4])?|topbtn[0-3]now)/g)||[]).join(" ")}).removeClass("is-open"),e("div.TOP-msg").css("display","none")},i.showNotificationNumber=function(o=[0,0,0]){const a=[" topbnow1"," topbnow2 mobilehide"," topbnow3 mobilehide"],h=[" topb1"," topb2 mobilehide"," topb3 mobilehide"];new p(o[0]).titleNotice().faviconNotice();for(let l=0,c=o.length;l<=c;l++){let t=e("#topBar_light_"+l),f=e("#topBarMsg_light_"+l);o[l]>0?t.addClass("topb"+(l+1)+a[l]).html(`<span>${o[l]}</span><span class="text-tooltip">${t.data("tooltiptext")}</span>`):f.css("display")==="none"&&t.removeClass().addClass("topb"+(l+1+h[l])).html(`<span class="text-tooltip">${t.data("tooltiptext")}</span>`)}},i.getNotificationNumber=function(){s&&n.port1.postMessage({action:"getNotificationNumber"})},s){var n=new MessageChannel,u=document.createElement("iframe");u.src="https://api.gamer.com.tw/worker/top_bar.html?v=2022111501",u.onload=function(){this.contentWindow.postMessage("BahamutTopBarInit","https://api.gamer.com.tw",[n.port2])},n.port1.onmessage=function(o){o.data.action==="ping"&&n.port1.postMessage({action:"pong",data:o.data.data}),typeof i[o.data.action]=="function"&&i[o.data.action](o.data.data)},u.style.display="none",document.body.appendChild(u)}class p{constructor(a){this.faviconUrl="https://i2.bahamut.com.tw/favicon.svg",this.iconUrl="https://i2.bahamut.com.tw/favicon_reddot.svg",this.num=+a,isNaN(this.num)&&(this.num=0)}setFaviconUrl(a){this.faviconUrl=a}titleNotice(){let a="";this.num>0&&(a=`(${this.num}) `);let h=r.document.title.match(/^\(\d+\) /);return h?a=`${a}${r.document.title.substring(h[0].length)}`:a=`${a}${r.document.title}`,r.document.title=a,this}faviconNotice(){let a=e("#notificationNotice");if(this.num==0){a.length&&a.attr("href")!=this.faviconUrl&&a.attr("href",this.faviconUrl);return}return a.length?a.attr("href")!=this.iconUrl&&a.attr("href",this.iconUrl):e("<link>").attr({id:"notificationNotice",type:"image/x-icon",rel:"icon",href:this.iconUrl}).appendTo("head"),this}}r.TopBar=i}(jQuery,window);
